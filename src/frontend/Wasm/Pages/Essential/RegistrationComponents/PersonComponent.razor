@using WeeControl.Core.SharedKernel.Contexts.Essentials
@using WeeControl.Host.WebApiService.Contexts.Constants
@using Microsoft.AspNetCore.Components

@inject IConstantValue ConstantValue

<EditForm Model="@model" OnValidSubmit="@(() => PersonalModelCallback.InvokeAsync(model))">
    <DataAnnotationsValidator/>
    <MudGrid Spacing="2">
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="First Name"
                          @bind-Value="@model.FirstName"
                          For="@(() => model.FirstName)">
            </MudTextField>
            <ValidationMessage For="@(() => model.FirstName)"/>
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Second Name"
                          @bind-Value="@model.SecondName"
                          For="@(() => model.SecondName)">
            </MudTextField>
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Third Name"
                          @bind-Value="@model.ThirdName"
                          For="@(() => model.ThirdName)">
            </MudTextField>
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Last Name"
                          @bind-Value="@model.LastName"
                          For="@(() => model.LastName)">
            </MudTextField>
        </MudItem>
        <MudItem xs="3" Style="max-width: 300px; align-self: start">
            <MudSelect T="string" Label="Nationality"
                       @bind-Value="@model.NationalityCode"
                       For="@(() => model.NationalityCode)">
                @foreach (var country in ConstantValue.Countries)
                {
                    <MudSelectItem Value="@country.CountryCode">@country.CountryName</MudSelectItem>
                }
            </MudSelect>
        </MudItem>
        <MudItem xs="3" Style="max-width: 300px; align-self: start">
            <MudDatePicker Label="Date Of Birth"
                           @bind-Date="@model.DateOfBirth"
                           Editable="true"
                           Mask="@(new DateMask("0000-00-00"))"
                           DateFormat="yyyy-MM-dd"
                           For="@(() => model.DateOfBirth)"/>
        </MudItem>
    </MudGrid>
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Text">Save</MudButton>
    <MudItem xs="6">
        <MudDivider></MudDivider>
    </MudItem>
</EditForm>



@code {
    private PersonModel model = new();
    
    [Parameter]
    public EventCallback<PersonModel> PersonalModelCallback { get; set; }
}