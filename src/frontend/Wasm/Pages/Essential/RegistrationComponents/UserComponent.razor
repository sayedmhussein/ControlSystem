@using WeeControl.Core.SharedKernel.Contexts.Essentials
@using System.ComponentModel.DataAnnotations

<EditForm Model="@model" OnValidSubmit="@(() => UserModelCallback.InvokeAsync(model))">
    <DataAnnotationsValidator/>
    <MudGrid Spacing="5">
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Your Email"
                          @bind-Value="@model.Email"
                          InputType="InputType.Email"
                          For="@(() => model.Email)"
            ></MudTextField>
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Username"
                          @bind-Value="@model.Username"
                          For="@(() => model.Username)"
            ></MudTextField>
                    
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Password"
                          @bind-Value="@model.Password"
                          InputType="InputType.Password"
                          HelperText="Choose a strong password."
                          For="@(() => model.Password)"
            ></MudTextField>
                    
        </MudItem>
        <MudItem xs="6" sm="3">
            <MudTextField T="string" Label="Confirm Password"
                          @bind-Value="@model.ConfirmPassword"
                          InputType="InputType.Password"
                          For="@(() => model.ConfirmPassword)"
            ></MudTextField>
        </MudItem>
        
        <MudItem xs="12">
            <MudDivider></MudDivider>
        </MudItem>
    </MudGrid>
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Text">Save</MudButton>
</EditForm>


@code {
    [Parameter]
    public EventCallback<UserModel> UserModelCallback { get; set; }
    
    private CustomRegistrationModel model = new();
    
    
    private class CustomRegistrationModel : UserModel
    {
        [Required]
        [Compare(nameof(Password))]
        public string ConfirmPassword { get; set; }
    }
}