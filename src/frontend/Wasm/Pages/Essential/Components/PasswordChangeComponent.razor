
@using WeeControl.Frontend.AppService.GuiInterfaces.Home
@using Microsoft.AspNetCore.Components
@using WeeControl.Core.DataTransferObject.Contexts.User
@inject IHomeService UserService

<EditForm Model="passwordChangeModel" OnValidSubmit="@(() => UserService.ChangeMyPassword(passwordChangeModel))">
    <DataAnnotationsValidator/>
    <MudCard>
        <MudCardHeader Style="font-size: large">Changing Password</MudCardHeader>
        <MudCardContent>
            <MudTextField Label="Old Password" HelperText="Max. 8 characters"
                          @bind-Value="passwordChangeModel.OldPassword" For="@(() => passwordChangeModel.OldPassword)" InputType="InputType.Password"/>
            <MudTextField Label="New Password" HelperText="Choose a strong password" Class="mt-3"
                          @bind-Value="passwordChangeModel.NewPassword" For="@(() => passwordChangeModel.NewPassword)" InputType="InputType.Password"/>
            <MudTextField Label="New Password" HelperText="Repeat the password" Class="mt-3"
                          @bind-Value="passwordChangeModel.ConfirmPassword" For="@(() => passwordChangeModel.ConfirmPassword)" InputType="InputType.Password"/>
        </MudCardContent>
        <MudCardActions>
            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Save</MudButton>
        </MudCardActions>
    </MudCard>
</EditForm>

@code
{
    private readonly UserPasswordChangeRequestDto passwordChangeModel = new();
}